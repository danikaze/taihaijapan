{{> admin.header}}

{{#if needsPasswordChange }}
  {{{warningMsg (t 'msg.needsPasswordChange')}}}
{{/if}}

<section id="config-site">
  <h4 data-toggle="config-site-content">{{{t 'options.site.sectionTitle'}}}</h4>

  <div id="config-site-content">
    {{{mdlInputText id='config-site-title'
                    name='site.title'
                    label=(t 'options.site.title')
                    value=(lookup config 'site.title')
    }}}
    {{{mdlInputText id='config-google-analytics'
                    name='google.analytics'
                    label=(t 'options.site.ga')
                    value=(lookup config 'google.analytics')
    }}}
  </div>
</section>

<section id="config-admin">
  <h4 data-toggle="config-admin-content">{{{t 'options.adminUser.sectionTitle'}}}</h4>

  <input type="hidden" name="admin.id" value="{{admin.id}}" />

  <div id="config-admin-content">
    {{{mdlInputText id='config-admin-user'
                    name='admin.username'
                    label=(t 'options.adminUser.username')
                    value=admin.username
    }}}
    {{{mdlInputSimpleSelect id='config-admin-lang'
                    name='admin.lang'
                    label=(t 'options.adminUser.language')
                    value=admin.lang
                    options=languages
    }}}
    {{{mdlInputText id='config-admin-password'
                    name='admin.password'
                    label=(t 'options.adminUser.password')
    }}}
    {{{mdlInputText id='config-admin-password-confirm'
                    name='admin.passwordConfirmation'
                    label=(t 'options.adminUser.passwordConfirm')
    }}}
  </div>
</section>

<section id="config-page-admin">
  <h4 data-toggle="page-admin-content">{{{t 'options.adminPage.sectionTitle'}}}</h4>

  <div id="page-admin-content">
    {{{mdlInputNumber id='page-admin-imagesPerPage'
                      name='page.admin.imagesPerPage'
                      label=(t 'options.adminPage.imgsPerPage')
                      value=(lookup config 'page.admin.imagesPerPage')
                      min=0
    }}}
    {{{mdlInputSimpleSelect id='page-admin-orderBy'
                    name='page.admin.orderBy'
                    label=(t 'options.adminPage.orderBy')
                    value=(lookup config 'page.admin.orderBy')
                    options=(array 'created' 'updated' 'slug' 'title')
    }}}
    {{{mdlInputCheckbox id='page-admin-reverse'
                        name='page.admin.reverse'
                        label=(t 'options.adminPage.orderReverse')
                        checked=(lookup config 'page.admin.reverse')
    }}}
  </div>
</section>

<section id="config-page-index">
  <h4 data-toggle="page-index-content">{{{t 'options.indexPage.sectionTitle'}}}</h4>

  <div id="page-index-content">
    {{{mdlInputNumber id='config-page-index-maxImages'
                      name='page.index.maxImages'
                      label=(t 'options.indexPage.imgsPerPage')
                      value=(lookup config 'page.index.maxImages')
                      min=0
    }}}
    {{{mdlInputSimpleSelect id='config-controllers-index-orderBy'
                    name='page.index.orderBy'
                    label=(t 'options.indexPage.orderBy')
                    value=(lookup config 'page.index.orderBy')
                    options=(array 'created' 'updated' 'slug' 'title')
    }}}
    {{{mdlInputCheckbox id='config-page-index-reverse'
                        name='page.index.reverse'
                        label=(t 'options.indexPage.orderReverse')
                        checked=(lookup config 'page.index.reverse')
    }}}
  </div>
</section>

<section id="config-gallery-options">
  <h4 data-toggle="gallery-options-content">{{{t 'options.galleryPage.sectionTitle'}}}</h4>

  <div id="gallery-options-content">
    {{{mdlInputNumber id='config-page-gallery-imagesPerPage'
                      name='page.gallery.imagesPerPage'
                      label=(t 'options.galleryPage.imgsPerPage')
                      value=(lookup config 'page.gallery.imagesPerPage')
                      min=0
    }}}
    {{{mdlInputSimpleSelect id='config-page-gallery-orderBy'
                    name='page.gallery.orderBy'
                    label=(t 'options.galleryPage.orderBy')
                    value=(lookup config 'page.gallery.orderBy')
                    options=(array 'created' 'updated' 'slug' 'title')
    }}}
    {{{mdlInputCheckbox id='config-page-gallery-reverse'
                        name='page.gallery.reverse'
                        label=(t 'options.galleryPage.orderReverse')
                        checked=(lookup config 'page.gallery.reverse')
    }}}
  </div>
</section>

<section id="config-images-options">
  <h4 data-toggle="images-options-content">{{{t 'options.imageOptions.sectionTitle'}}}</h4>

  <div id="images-options-content">
    {{{mdlInputCheckbox id='config-images-hiddenByDefault'
                        name='images.hiddenByDefault'
                        label=(t 'options.imageOptions.hiddenByDefault')
                        checked=(lookup config 'images.hiddenByDefault')
    }}}
  </div>
</section>

<section id="config-thumbnails-options">
  <h4 data-toggle="thumbnails-options-content">{{{t 'options.thumbnailOptions.sectionTitle'}}}</h4>

  <div id="thumbnails-options-content">
    <table class="mdl-data-table mdl-js-data-table mdl-shadow--2dp">
      <thead>
        <tr>
          <th class="mdl-data-table__cell--non-numeric">{{{t 'options.thumbnailOptions.id'}}}</th>
          <th>{{{t 'options.thumbnailOptions.width'}}}</th>
          <th>{{{t 'options.thumbnailOptions.height'}}}</th>
          <th>{{{t 'options.thumbnailOptions.quality'}}}</th>
        </tr>
      </thead>
      <tbody>
        {{#each sizes}}
          <tr class="thumb-size">
            <input type="hidden" name="id" value="{{this.id}}"/>
            <td class="mdl-data-table__cell--non-numeric">
              {{{mdlInputText id=(add 'config-sizes-label-' @key)
                              name='label'
                              pattern='[a-zA-Z][a-zA-Z0-9_.-]?'
                              value=this.label
              }}}
            </td>
            <td>
              {{{mdlInputNumber id=(add 'config-sizes-w-' @key)
                                name='width'
                                value=this.width
                                min=0
              }}}
            </td>
            <td>
              {{{mdlInputNumber id=(add 'config-sizes-h-' @key)
                                name='height'
                                value=this.height
                                min=0
              }}}
            </td>
            <td>
              {{{mdlInputNumber id=(add 'config-sizes-quality-' @key)
                              name='quality'
                              value=this.height
                              min=0
                              max=100
              }}}
            </td>
          </tr>
        {{/each}}
      </tbody>
    </table>
  </div>
</section>

<button id="update-button" class="mdl-button mdl-js-button mdl-button--raised mdl-js-ripple-effect">
  {{{t 'updateSettings'}}}
</button>

<script src="/public/js/admin-config-{{version}}.min.js" type="text/javascript"></script>
<script type="text/javascript">
  run('{{routeOptions}}', {{{stringify i18n}}});
</script>

{{> admin.footer}}
